<html>
 <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="../../coverage.css"/>  <title> metis/scheduler/core.clj </title>
 </head>
 <body>
<span class="covered" title="1 out of 1 forms covered">
                001&nbsp;&nbsp;(ns&nbsp;metis.scheduler.core
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                002&nbsp;&nbsp;&nbsp;&nbsp;^{:author&nbsp;&quot;wactbprot&quot;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                003&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:doc&nbsp;&quot;Starts&nbsp;and&nbsp;stops&nbsp;a&nbsp;scheduler.&quot;}
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                004&nbsp;&nbsp;&nbsp;&nbsp;(:require&nbsp;[metis.config.interface&nbsp;:as&nbsp;c]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                005&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[com.brunobonacci.mulog&nbsp;:as&nbsp;mu]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                006&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[metis.scheduler.proc&nbsp;:as&nbsp;proc]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                007&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[metis.stmem.interface&nbsp;:as&nbsp;stmem]
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                008&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[metis.worker.interface&nbsp;:as&nbsp;worker]))
                </span><br/>
<span class="blank" title="0 out of 0 forms covered">
                009&nbsp;&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                010&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                011&nbsp;&nbsp;;;&nbsp;stop&nbsp;state
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                012&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                013&nbsp;&nbsp;(defn&nbsp;stop-state
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                014&nbsp;&nbsp;&nbsp;&nbsp;&quot;Registers&nbsp;a&nbsp;stmem&nbsp;listener&nbsp;for&nbsp;the&nbsp;`state`-interface&nbsp;of&nbsp;a&nbsp;`container`&nbsp;or&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                015&nbsp;&nbsp;&nbsp;&nbsp;`definitions`&nbsp;struct.&nbsp;[[start-next]]&nbsp;is&nbsp;the&nbsp;callback&nbsp;of&nbsp;this
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                016&nbsp;&nbsp;&nbsp;&nbsp;listener.&quot;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                017&nbsp;&nbsp;&nbsp;&nbsp;[m]
                </span><br/>
<span class="not-covered" title="0 out of 12 forms covered">
                018&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::stop-state&nbsp;:message&nbsp;&quot;de-register&quot;)
                </span><br/>
<span class="not-covered" title="0 out of 11 forms covered">
                019&nbsp;&nbsp;&nbsp;&nbsp;(stmem&#x2F;de-register&nbsp;(assoc&nbsp;m&nbsp;:func&nbsp;:state&nbsp;:seq-idx&nbsp;:*&nbsp;:par-idx&nbsp;:*)))
                </span><br/>
<span class="blank" title="0 out of 0 forms covered">
                020&nbsp;&nbsp;
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                021&nbsp;&nbsp;(defn&nbsp;new-ctrl&nbsp;[m]
                </span><br/>
<span class="not-covered" title="0 out of 10 forms covered">
                022&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[m&nbsp;&nbsp;&nbsp;(assoc&nbsp;(dissoc&nbsp;m&nbsp;:par-idx&nbsp;:seq-idx)&nbsp;:func&nbsp;:ctrl)
                </span><br/>
<span class="not-covered" title="0 out of 5 forms covered">
                023&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd&nbsp;(keyword&nbsp;(stmem&#x2F;get-val&nbsp;m))
                </span><br/>
<span class="not-covered" title="0 out of 6 forms covered">
                024&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd&nbsp;(if&nbsp;(=&nbsp;cmd&nbsp;:mon)&nbsp;:mon&nbsp;:ready)
                </span><br/>
<span class="not-covered" title="0 out of 5 forms covered">
                025&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;&nbsp;&nbsp;(assoc&nbsp;m&nbsp;:value&nbsp;cmd)]
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                026&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::handle-all-exec&nbsp;:message&nbsp;&quot;set&nbsp;new&nbsp;ctrl&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                027&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmem&#x2F;set-ctrl&nbsp;m)))
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                028&nbsp;&nbsp;&nbsp;&nbsp;
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                029&nbsp;&nbsp;(defn&nbsp;handle-all-exec
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                030&nbsp;&nbsp;&nbsp;&nbsp;[v]
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                031&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[m&nbsp;(first&nbsp;v)]
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                032&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::handle-all-exec&nbsp;:message&nbsp;&quot;all&nbsp;tasks&nbsp;executed&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                033&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stop-state&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 13 forms covered">
                034&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmem&#x2F;set-states&nbsp;(assoc&nbsp;m&nbsp;:func&nbsp;:state&nbsp;:seq-idx&nbsp;:*&nbsp;:par-idx&nbsp;:*&nbsp;:value&nbsp;:ready))))
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                035&nbsp;&nbsp;&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                036&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                037&nbsp;&nbsp;;;&nbsp;start-next
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                038&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                039&nbsp;&nbsp;(defn&nbsp;start-next
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                040&nbsp;&nbsp;&nbsp;&nbsp;&quot;`start-next`&nbsp;`proc`esses&nbsp;the&nbsp;`m`ap&nbsp;of&nbsp;the&nbsp;task&nbsp;to&nbsp;start&nbsp;`next`.
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                041&nbsp;&nbsp;&nbsp;&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                042&nbsp;&nbsp;&nbsp;&nbsp;Then&nbsp;the&nbsp;`worker`&nbsp;set&nbsp;the&nbsp;state&nbsp;to&nbsp;`\&quot;working\&quot;`&nbsp;which&nbsp;triggers&nbsp;the
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                043&nbsp;&nbsp;&nbsp;&nbsp;next&nbsp;call&nbsp;to&nbsp;`start-next!`:&nbsp;parallel&nbsp;tasks&nbsp;are&nbsp;started&nbsp;this&nbsp;way.&quot;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                044&nbsp;&nbsp;&nbsp;&nbsp;[m]
                </span><br/>
<span class="not-covered" title="0 out of 12 forms covered">
                045&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[v&nbsp;(stmem&#x2F;get-maps&nbsp;(assoc&nbsp;m&nbsp;:func&nbsp;:state&nbsp;:seq-idx&nbsp;:*&nbsp;:par-idx&nbsp;:*))
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                046&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;(proc&#x2F;next-map&nbsp;v)]
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                047&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::start-next&nbsp;:message&nbsp;&quot;before&nbsp;cond&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                048&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond
                </span><br/>
<span class="not-covered" title="0 out of 12 forms covered">
                049&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(proc&#x2F;errors?&nbsp;v)&nbsp;(stmem&#x2F;set-ctrl&nbsp;(assoc&nbsp;(first&nbsp;v)&nbsp;:value&nbsp;:error))
                </span><br/>
<span class="not-covered" title="0 out of 6 forms covered">
                050&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(proc&#x2F;all-executed?&nbsp;v)&nbsp;(handle-all-exec&nbsp;v)
                </span><br/>
<span class="not-covered" title="0 out of 15 forms covered">
                051&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(nil?&nbsp;m)&nbsp;(mu&#x2F;log&nbsp;::start-next&nbsp;:message&nbsp;&quot;no&nbsp;operation&quot;)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                052&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:else&nbsp;(worker&#x2F;run&nbsp;m))))
                </span><br/>
<span class="blank" title="0 out of 0 forms covered">
                053&nbsp;&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                054&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                055&nbsp;&nbsp;;;&nbsp;start&nbsp;state
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                056&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                057&nbsp;&nbsp;(defn&nbsp;start-state
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                058&nbsp;&nbsp;&nbsp;&nbsp;&quot;Registers&nbsp;a&nbsp;stmem&nbsp;listener&nbsp;for&nbsp;the&nbsp;`state`-interface&nbsp;of&nbsp;a&nbsp;`container`&nbsp;or
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                059&nbsp;&nbsp;&nbsp;&nbsp;`definitions`&nbsp;struct.&nbsp;[[start-next]]&nbsp;is&nbsp;the&nbsp;callback&nbsp;of&nbsp;this
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                060&nbsp;&nbsp;&nbsp;&nbsp;listener.&quot;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                061&nbsp;&nbsp;&nbsp;&nbsp;[m]
                </span><br/>
<span class="not-covered" title="0 out of 10 forms covered">
                062&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[m&nbsp;(assoc&nbsp;m&nbsp;:func&nbsp;:state&nbsp;:seq-idx&nbsp;:*&nbsp;:par-idx&nbsp;:*)]
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                063&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::start-state&nbsp;:message&nbsp;&quot;register,&nbsp;callback&nbsp;and&nbsp;start-next&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                064&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmem&#x2F;register&nbsp;m&nbsp;start-next)
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                065&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::start-state&nbsp;:message&nbsp;&quot;will&nbsp;call&nbsp;start-next&nbsp;first&nbsp;trigger&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                066&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(start-next&nbsp;m)))
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                067&nbsp;&nbsp;&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                068&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                069&nbsp;&nbsp;;;&nbsp;dispatch
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                070&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                071&nbsp;&nbsp;(defn&nbsp;dispatch
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                072&nbsp;&nbsp;&nbsp;&nbsp;&quot;`start`s&nbsp;or&nbsp;`stop`s&nbsp;the&nbsp;state&nbsp;observation&nbsp;of&nbsp;container&nbsp;`(:no-idx&nbsp;m)`
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                073&nbsp;&nbsp;&nbsp;&nbsp;depending&nbsp;on&nbsp;`cmd`.&nbsp;If&nbsp;an&nbsp;`:error`&nbsp;occurs&nbsp;the&nbsp;system&nbsp;is&nbsp;kept
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                074&nbsp;&nbsp;&nbsp;&nbsp;running&nbsp;(no&nbsp;`stop`&nbsp;and&nbsp;`de-register`).&nbsp;So,&nbsp;no&nbsp;restart&nbsp;is&nbsp;necessary.&nbsp;Just&nbsp;fix&nbsp;the
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                075&nbsp;&nbsp;&nbsp;&nbsp;problem&nbsp;and&nbsp;set&nbsp;the&nbsp;corresponding&nbsp;state&nbsp;from&nbsp;`:error`&nbsp;to&nbsp;`ready`&nbsp;and
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                076&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;processing&nbsp;goes&nbsp;on.&quot;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                077&nbsp;&nbsp;&nbsp;&nbsp;[m]
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                078&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::dispatch&nbsp;:message&nbsp;&quot;start&nbsp;dispach&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 6 forms covered">
                079&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[cmd&nbsp;(keyword&nbsp;(:value&nbsp;m))]
                </span><br/>
<span class="not-covered" title="0 out of 24 forms covered">
                080&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(condp&nbsp;=&nbsp;cmd
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                081&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:run&nbsp;(start-state&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                082&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:mon&nbsp;(start-state&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                083&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:stop&nbsp;(do
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                084&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stop-state&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 6 forms covered">
                085&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmem&#x2F;set-states&nbsp;(assoc&nbsp;m&nbsp;:ready))
                </span><br/>
<span class="not-covered" title="0 out of 1 forms covered">
                086&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:reset&nbsp;(do
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                087&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stop-state&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 6 forms covered">
                088&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmem&#x2F;set-states&nbsp;(assoc&nbsp;m&nbsp;:ready)))
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                089&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:suspend&nbsp;(stop-state&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                090&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:error&nbsp;(mu&#x2F;log&nbsp;::dispatch&nbsp;:error&nbsp;&quot;at&nbsp;ctrl&nbsp;interface&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 12 forms covered">
                091&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::dispatch&nbsp;:message&nbsp;&quot;default&nbsp;case&nbsp;ctrl&nbsp;dispach&nbsp;function&quot;)))))
                </span><br/>
<span class="blank" title="0 out of 0 forms covered">
                092&nbsp;&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                093&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                094&nbsp;&nbsp;;;&nbsp;ctrl&nbsp;interface
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                095&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                096&nbsp;&nbsp;;;&nbsp;stop-ctrl
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                097&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                098&nbsp;&nbsp;(defn&nbsp;stop-ctrl
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                099&nbsp;&nbsp;&nbsp;&nbsp;&quot;De-registers&nbsp;the&nbsp;listener&nbsp;for&nbsp;the&nbsp;`ctrl`&nbsp;interfaces&nbsp;of&nbsp;the
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                100&nbsp;&nbsp;&nbsp;&nbsp;`mp-id`.&nbsp;After&nbsp;stopping,&nbsp;the&nbsp;system&nbsp;will&nbsp;no&nbsp;longer&nbsp;react&nbsp;on
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                101&nbsp;&nbsp;&nbsp;&nbsp;changes&nbsp;(write&nbsp;events)&nbsp;at&nbsp;the&nbsp;`ctrl`&nbsp;interface.&quot;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                102&nbsp;&nbsp;&nbsp;&nbsp;[mp-id]
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                103&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[m&nbsp;{:mp-id&nbsp;mp-id}]
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                104&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::stop-ctrl&nbsp;:message&nbsp;&quot;de-register&nbsp;and&nbsp;clean&nbsp;all&nbsp;ctrl&nbsp;listener&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                105&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmem&#x2F;clean-register&nbsp;m)))
                </span><br/>
<span class="blank" title="0 out of 0 forms covered">
                106&nbsp;&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                107&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                108&nbsp;&nbsp;;;&nbsp;start-ctrl
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                109&nbsp;&nbsp;;;------------------------------
                </span><br/>
<span class="covered" title="1 out of 1 forms covered">
                110&nbsp;&nbsp;(defn&nbsp;start-ctrl
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                111&nbsp;&nbsp;&nbsp;&nbsp;&quot;Registers&nbsp;a&nbsp;listener&nbsp;for&nbsp;the&nbsp;`ctrl`&nbsp;interface&nbsp;of&nbsp;the&nbsp;entire
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                112&nbsp;&nbsp;&nbsp;&nbsp;`mp-id`.&nbsp;The&nbsp;[[dispatch]]&nbsp;function&nbsp;becomes&nbsp;the&nbsp;listeners&nbsp;`cb!`.&quot;&nbsp;
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                113&nbsp;&nbsp;&nbsp;&nbsp;([mp-id]
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                114&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(start-ctrl&nbsp;c&#x2F;config&nbsp;mp-id))
                </span><br/>
<span class="not-tracked" title="0 out of 0 forms covered">
                115&nbsp;&nbsp;&nbsp;&nbsp;([config&nbsp;mp-id]
                </span><br/>
<span class="not-covered" title="0 out of 3 forms covered">
                116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(prn&nbsp;&quot;..:&quot;)
                </span><br/>
<span class="not-covered" title="0 out of 10 forms covered">
                117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;[m&nbsp;{:mp-id&nbsp;mp-id&nbsp;:struct&nbsp;:*&nbsp;:no-idx&nbsp;:*&nbsp;:func&nbsp;:ctrl}]
                </span><br/>
<span class="not-covered" title="0 out of 14 forms covered">
                118&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mu&#x2F;log&nbsp;::start-ctrl&nbsp;:message&nbsp;&quot;register&nbsp;ctrl&nbsp;listener&quot;&nbsp;:m&nbsp;m)
                </span><br/>
<span class="not-covered" title="0 out of 4 forms covered">
                119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stmem&#x2F;register&nbsp;m&nbsp;dispatch))))
                </span><br/>
 </body>
</html>
