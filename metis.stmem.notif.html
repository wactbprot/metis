<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>metis.stmem.notif documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="readme.html"><div class="inner"><span>Μητις</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metis</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cli</span></div></div></li><li class="depth-3"><a href="metis.cli.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>config</span></div></div></li><li class="depth-3 branch"><a href="metis.config.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.config.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>document</span></div></div></li><li class="depth-3 branch"><a href="metis.document.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.document.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>exchange</span></div></div></li><li class="depth-3 branch"><a href="metis.exchange.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-3 branch"><a href="metis.exchange.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.exchange.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>log</span></div></div></li><li class="depth-3 branch"><a href="metis.log.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.log.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>ltmem</span></div></div></li><li class="depth-3 branch"><a href="metis.ltmem.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.ltmem.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>model</span></div></div></li><li class="depth-3 branch"><a href="metis.model.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.model.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>page</span></div></div></li><li class="depth-3 branch"><a href="metis.page.body.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>body</span></div></a></li><li class="depth-3 branch"><a href="metis.page.container.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>container</span></div></a></li><li class="depth-3 branch"><a href="metis.page.elements.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>elements</span></div></a></li><li class="depth-3 branch"><a href="metis.page.head.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>head</span></div></a></li><li class="depth-3 branch"><a href="metis.page.home.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>home</span></div></a></li><li class="depth-3 branch"><a href="metis.page.mpd-ref.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mpd-ref</span></div></a></li><li class="depth-3 branch"><a href="metis.page.nav.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nav</span></div></a></li><li class="depth-3"><a href="metis.page.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>scheduler</span></div></div></li><li class="depth-3 branch"><a href="metis.scheduler.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="metis.scheduler.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3"><a href="metis.scheduler.proc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proc</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>srv</span></div></div></li><li class="depth-3"><a href="metis.srv.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>stmem</span></div></div></li><li class="depth-3 branch"><a href="metis.stmem.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-3 branch"><a href="metis.stmem.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="metis.stmem.flow-control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flow-control</span></div></a></li><li class="depth-3 branch"><a href="metis.stmem.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3 branch current"><a href="metis.stmem.notif.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>notif</span></div></a></li><li class="depth-3"><a href="metis.stmem.trans.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>trans</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>tasks</span></div></div></li><li class="depth-3 branch"><a href="metis.tasks.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.tasks.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>utils</span></div></div></li><li class="depth-3 branch"><a href="metis.utils.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.utils.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>worker</span></div></div></li><li class="depth-3 branch"><a href="metis.worker.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.ctrl-mp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ctrl-mp</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.date-time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>date-time</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.db-doc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db-doc</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.devhub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>devhub</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.devproxy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>devproxy</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.exchange.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exchange</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.replicate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>replicate</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.resp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resp</span></div></a></li><li class="depth-3 branch"><a href="metis.worker.select-definition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>select-definition</span></div></a></li><li class="depth-3"><a href="metis.worker.wait.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wait</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>ws</span></div></div></li><li class="depth-3 branch"><a href="metis.ws.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="metis.ws.interface.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interface</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="metis.stmem.notif.html#var-clean-register"><div class="inner"><span>clean-register</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-close-listener"><div class="inner"><span>close-listener</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-de-register"><div class="inner"><span>de-register</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-gen-listener"><div class="inner"><span>gen-listener</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-listeners"><div class="inner"><span>listeners</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-m-.3Efunc"><div class="inner"><span>m-&gt;func</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-m-.3Emp-id"><div class="inner"><span>m-&gt;mp-id</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-m-.3Eno-idx"><div class="inner"><span>m-&gt;no-idx</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-m-.3Estruct"><div class="inner"><span>m-&gt;struct</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-reg-key"><div class="inner"><span>reg-key</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-reg-pat"><div class="inner"><span>reg-pat</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-register"><div class="inner"><span>register</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-registered"><div class="inner"><span>registered</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-registered.3F"><div class="inner"><span>registered?</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-subs-pat"><div class="inner"><span>subs-pat</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-wrap-assoc-value"><div class="inner"><span>wrap-assoc-value</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-wrap-key-.3Emap"><div class="inner"><span>wrap-key-&gt;map</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-wrap-msg-.3Ekey"><div class="inner"><span>wrap-msg-&gt;key</span></div></a></li><li class="depth-1"><a href="metis.stmem.notif.html#var-wrap-skip-psubs"><div class="inner"><span>wrap-skip-psubs</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">metis.stmem.notif</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-clean-register"><h3>clean-register</h3><div class="usage"><code>(clean-register {mp-id :mp-id})</code></div><div class="doc"><div class="markdown"><p>Closes and <code>de-registers</code> <strong>all</strong> <code>listeners</code> belonging to <code>mp-id</code> .</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L145">view source</a></div></div><div class="public anchor" id="var-close-listener"><h3>close-listener</h3><div class="usage"><code>(close-listener l)</code></div><div class="doc"><div class="markdown"><p>Closes the given listener generated by <a href="metis.stmem.notif.html#var-gen-listener">gen-listener</a>.</p>
<p>Example:</p>
<pre><code class="clojure">;; generate
(def l (gen-listener {:mp-id "ref"} msg-&gt;map))
;; close
(close-listener! l)
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L132">view source</a></div></div><div class="public anchor" id="var-de-register"><h3>de-register</h3><div class="usage"><code>(de-register m)</code></div><div class="doc"><div class="markdown"><p>De-registers the listener with a key derived from <code>m</code>. <code>dissoc</code> it afterwards from the <code>listeners</code> atom.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L155">view source</a></div></div><div class="public anchor" id="var-gen-listener"><h3>gen-listener</h3><div class="usage"><code>(gen-listener m f)</code><code>(gen-listener {{conn :spec} :stmem-conn, :as config} m f)</code></div><div class="doc"><div class="markdown"><p>Returns a listener for published keyspace <strong>notif</strong>ications. Don’t forget to <a href="metis.stmem.notif.html#var-close-listener">close-listener</a></p>
<p>Example:</p>
<pre><code class="clojure">;; generate and close
(close-listener! (gen-listener {:mp-id "ref"} msg-&gt;key))
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L84">view source</a></div></div><div class="public anchor" id="var-listeners"><h3>listeners</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L13">view source</a></div></div><div class="public anchor" id="var-m-.3Efunc"><h3>m-&gt;func</h3><div class="usage"><code>(m-&gt;func {t :stmem-trans} {func :func})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L23">view source</a></div></div><div class="public anchor" id="var-m-.3Emp-id"><h3>m-&gt;mp-id</h3><div class="usage"><code>(m-&gt;mp-id {t :stmem-trans} {mp-id :mp-id})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L25">view source</a></div></div><div class="public anchor" id="var-m-.3Eno-idx"><h3>m-&gt;no-idx</h3><div class="usage"><code>(m-&gt;no-idx {t :stmem-trans, :as config} {no-idx :no-idx})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L20">view source</a></div></div><div class="public anchor" id="var-m-.3Estruct"><h3>m-&gt;struct</h3><div class="usage"><code>(m-&gt;struct {t :stmem-trans} {struct :struct})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L18">view source</a></div></div><div class="public anchor" id="var-reg-key"><h3>reg-key</h3><div class="usage"><code>(reg-key m)</code><code>(reg-key {t :stmem-trans, s :stmem-notif-sep, :as config} m)</code></div><div class="doc"><div class="markdown"><p>Generates a register key for the <code>listener</code> map.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L48">view source</a></div></div><div class="public anchor" id="var-reg-pat"><h3>reg-pat</h3><div class="usage"><code>(reg-pat m)</code><code>(reg-pat {t :stmem-trans, s :stmem-notif-sep, :as config} {struct :struct, :as m})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L27">view source</a></div></div><div class="public anchor" id="var-register"><h3>register</h3><div class="usage"><code>(register m f)</code><code>(register {relax :stmem-reg-relax, :as config} m f)</code></div><div class="doc"><div class="markdown"><p>Generates a listener for the function <code>f</code>. Registers it at the <code>listeners</code> atom.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L115">view source</a></div></div><div class="public anchor" id="var-registered"><h3>registered</h3><div class="usage"><code>(registered)</code></div><div class="doc"><div class="markdown"><p>Retuns a vector of maps containing information about the registered listeners</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L107">view source</a></div></div><div class="public anchor" id="var-registered.3F"><h3>registered?</h3><div class="usage"><code>(registered? k)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L105">view source</a></div></div><div class="public anchor" id="var-subs-pat"><h3>subs-pat</h3><div class="usage"><code>(subs-pat m)</code><code>(subs-pat config m)</code></div><div class="doc"><div class="markdown"><p>Generates subscribe patterns.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L40">view source</a></div></div><div class="public anchor" id="var-wrap-assoc-value"><h3>wrap-assoc-value</h3><div class="usage"><code>(wrap-assoc-value f)</code><code>(wrap-assoc-value config f)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L75">view source</a></div></div><div class="public anchor" id="var-wrap-key-.3Emap"><h3>wrap-key-&gt;map</h3><div class="usage"><code>(wrap-key-&gt;map f)</code><code>(wrap-key-&gt;map config f)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L69">view source</a></div></div><div class="public anchor" id="var-wrap-msg-.3Ekey"><h3>wrap-msg-&gt;key</h3><div class="usage"><code>(wrap-msg-&gt;key f)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L65">view source</a></div></div><div class="public anchor" id="var-wrap-skip-psubs"><h3>wrap-skip-psubs</h3><div class="usage"><code>(wrap-skip-psubs f)</code></div><div class="doc"><div class="markdown"><p>Ensures that f is only executed on <code>pmessage</code>s. Skips the subscribe event calls.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/metis/blob/master/components/stmem/src/metis/stmem/notif.clj#L59">view source</a></div></div></div></body></html>